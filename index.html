<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bouncy Ball</title>
</head>
<body>
<canvas id="gameCanvas" width="400" height="300">
    <script>
        //debugger;

        //declare variables
        const FPS = 30;

        //ball size
        var bs = 47;

        //ball position x, y
        var bx, by;

        //ball velocity x, y (in pixels per a second, aka how many pixels it moves per frame)
        var xv, yv;
        var canvas,context;

        //get canvas and context
        canvas = document.getElementById("gameCanvas");
        context = canvas.getContext("2d");

        //Calls the update function every 1/30th of a second
        setInterval(update, 1000 / FPS);

        // sets ball position to middle of canvas
        bx = canvas.width / 2;
        by = canvas.height/ 2;

        // random ball starting speed (between 25 and 100 pixels per a second)
        xv = Math.floor(Math.random() * 76 + 25) / FPS;
        yv = Math.floor(Math.random() * 76 + 25) / FPS;

        // random ball direction
        if (Math.floor(Math.random() * 2) == 0) {
            xv = -xv;
        }
        if (Math.floor(Math.random() * 2) == 0) {
            yv = -yv;
        }


        //update function
        function update() {
            //move the ball
            bx += xv;
            by += yv;

            //bounce the ball off each wall

                //checking if ball position (minus the size of the ball) is less than zero,
                //and if velocity is 0 (works because velocity will be negative if out of bounds)
            if (bx - bs / 2 < 0 && xv < 0){
                console.log(xv);
                xv = -xv;
            }
                //checking if ball position is more than the width of the canvas and if velocity is more than 0
            if (bx + bs / 2 > canvas.width && xv > 0){
                xv = -xv;
            }
            if (by - bs / 2 < 0 && yv < 0){
                yv = -yv;
            }
            if (by + bs / 2 > canvas.height && yv > 0){
                yv = -yv;
            }

            document.addEventListener('keydown', function(event) {
                switch(event.code) {
                    case "KeyS":
                    case "ArrowDown":
                        if(yv < 0){
                            yv = Math.abs(yv);
                            break;
                        } else {
                            break;
                        }
                    case "KeyW":
                    case "ArrowUp":
                        // Handle "forward"
                        if(yv > 0){
                            yv = -yv;
                            break;
                        } else {
                            break;
                        }
                        break;
                    case "KeyA":
                    case "ArrowLeft":
                        // Handle "turn left"
                        if(xv > 0){
                            xv = -xv;
                            break;
                        } else {
                            break;
                        }
                        break;
                    case "KeyD":
                    case "ArrowRight":
                        // Handle "turn right"
                        if(xv < 0){
                            xv = Math.abs(xv);
                            break;
                        } else {
                            break;
                        }
                        break;
                }
            });


            //draw background and ball
            //redraws the canvas each time, first it draws the background, then it redraws some of the black with a yellow square for the ball
            context.fillStyle = "black";
            context.fillRect(0, 0, canvas.width, canvas.height);

            //context.fillStyle = "yellow";
            //context.fillRect(bx - bs / 2, by - bs / 2, bs, bs);

            //Adding DVD Logo Image in place of yellow square
            var img = document.getElementById("dvdlogo");
            context.drawImage(img, bx - bs / 2, by - bs / 2);
        }
    </script>

</canvas>
<img style="display: none;" width="10px" height="10px" src="dvdLogo.png" id="dvdlogo">

</body>
</html>